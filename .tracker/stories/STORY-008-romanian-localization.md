# STORY-008: Romanian Localization (i18n)

**Status:** todo
**Priority:** high
**Epic:** EPIC-002 (Internationalization)
**Created:** 2026-02-10

## Description

Localize the entire mobi application to Romanian language while keeping backend code and internal field identifiers in English.

## User Story

> **As a** Romanian property owner  
> **I want to** use the application in Romanian  
> **So that** I can easily create property listings in my native language

## Scope

### What Changes to Romanian ğŸ‡·ğŸ‡´

**Frontend UI:**
- All button text
- Field labels
- Error messages
- Success messages
- Validation messages
- Modal text
- Helper text/tooltips
- Navigation/menu items

**AI Responses:**
- AI guidance messages (e.g., "Let's start by identifying what type of property you're listing")
- Property descriptions generated by AI
- Synthesis descriptions
- Room descriptions
- Error explanations

**Form Field Labels:**
- "Property Type" â†’ "Tipul ProprietÄƒÈ›ii"
- "Price" â†’ "PreÈ›"
- "Bedrooms" â†’ "Dormitoare"
- "Bathrooms" â†’ "BÄƒi"
- etc.

### What Stays in English ğŸ‡¬ğŸ‡§

**Backend/Technical:**
- Field IDs: `property_type`, `bedrooms`, `bathrooms`
- API endpoints: `/api/analyze-step`, `/api/listings`
- Database column names
- Code/function names
- Configuration keys

**Internal Data:**
- Property values in database: "apartment", "house" (internal)
- Amenity identifiers: "hardwood_floors", "granite_counters"
- Room type keys: "bedroom", "kitchen"

**Why?** Backend stays English for:
- Code maintainability
- API compatibility
- Database consistency
- Developer clarity

---

## Key Romanian Translations

### Property Types
```
apartment â†’ Apartament
house â†’ CasÄƒ
condo â†’ Condominium
townhouse â†’ CasÄƒ Ã®n È˜ir
land â†’ Teren
commercial â†’ Comercial
```

### Common Fields
```
Property Type â†’ Tipul ProprietÄƒÈ›ii
Price â†’ PreÈ›
Bedrooms â†’ Dormitoare / Camere de Dormit
Bathrooms â†’ BÄƒi
Square Feet â†’ SuprafaÈ›Äƒ (metri pÄƒtraÈ›i)
Address â†’ AdresÄƒ
City â†’ OraÈ™
State â†’ JudeÈ› / Regiune
Zip Code â†’ Cod PoÈ™tal
Description â†’ Descriere
```

### Rooms
```
bedroom â†’ Dormitor
kitchen â†’ BucÄƒtÄƒrie
living_room â†’ Sufragerie / Living
bathroom â†’ Baie
hallway â†’ Hol
dining_room â†’ CamerÄƒ de MÃ¢ncare
office â†’ Birou
balcony â†’ Balcon
```

### Amenities
```
hardwood_floors â†’ Parchet
granite_counters â†’ Blat de Granit
fireplace â†’ È˜emineu
dishwasher â†’ MaÈ™inÄƒ de SpÄƒlat Vase
pool â†’ PiscinÄƒ
garage â†’ Garaj
garden â†’ GrÄƒdinÄƒ
balcony â†’ Balcon
```

### UI Elements
```
Continue â†’ ContinuÄƒ
Preview Listing â†’ Previzualizare AnunÈ›
Save Listing â†’ SalveazÄƒ AnunÈ›ul
Preview & Save â†’ Previzualizare È™i Salvare
Reset form â†’ ReseteazÄƒ formularul
Get Started â†’ Ãncepe
Upload â†’ ÃncarcÄƒ
Drop a photo to start your listing â†’ Pune o pozÄƒ pentru a Ã®ncepe anunÈ›ul
Property Overview â†’ Prezentare Proprietate
images analyzed â†’ imagini analizate
Rooms detected in images â†’ Camere detectate Ã®n imagini
Listing Complete! â†’ AnunÈ› Complet!
```

### Messages
```
Please select a property type before previewing â†’ SelectaÈ›i tipul proprietÄƒÈ›ii Ã®nainte de previzualizare
At least one image is required â†’ Este necesarÄƒ cel puÈ›in o imagine
Listing saved successfully â†’ AnunÈ› salvat cu succes
Are you sure you want to reset the form? â†’ Sigur doriÈ›i sÄƒ resetaÈ›i formularul?
This will clear all data â†’ Toate datele vor fi È™terse
```

---

## Technical Approach

### Phase 1: Frontend i18n Infrastructure (TASK-037)

**Create translation system:**

```typescript
// frontend/src/lib/i18n/index.ts
export const translations = {
  ro: {
    'property_type': 'Tipul ProprietÄƒÈ›ii',
    'price': 'PreÈ›',
    'bedrooms': 'Dormitoare',
    // ... all translations
  }
};

export function t(key: string, locale: string = 'ro'): string {
  return translations[locale]?.[key] || key;
}
```

**Field mapping:**
```typescript
// Map internal field IDs to Romanian labels
const fieldLabels: Record<string, string> = {
  'property_type': 'Tipul ProprietÄƒÈ›ii',
  'price': 'PreÈ›',
  'bedrooms': 'Dormitoare',
  'bathrooms': 'BÄƒi',
  // ...
};
```

### Phase 2: Update All Components (TASK-038)

**Replace hardcoded text:**

```svelte
<!-- Before -->
<button>Continue</button>

<!-- After -->
<button>{t('continue')}</button>
```

**Field labels:**
```svelte
<!-- Before -->
<label for="bedrooms">Bedrooms</label>

<!-- After -->
<label for="bedrooms">{t('bedrooms')}</label>
```

### Phase 3: Backend AI Message Translation (TASK-039)

**Modify orchestrator to return Romanian messages:**

```python
# backend/app/orchestrator.py

def generate_ai_message(self, current_data: Dict, step: int) -> str:
    """Generate Romanian AI guidance message."""
    
    if not current_data.get("property_type"):
        return "SÄƒ Ã®ncepem prin a identifica ce tip de proprietate afiÈ™aÈ›i."
    
    if step < 3:
        return "SÄƒ continuÄƒm cu detaliile esenÈ›iale despre proprietatea dvs."
    
    if step < 5:
        return "FaceÈ›i progrese bune! ÃncÄƒ cÃ¢teva detalii cheie."
    
    return "Aproape terminat! PermiteÈ›i-mi sÄƒ obÈ›in detaliile finale pentru anunÈ›ul dvs."
```

**Property descriptions in Romanian:**

```python
# backend/app/vision_model.py

def generate_unified_description(...) -> str:
    """Generate Romanian property description."""
    
    # Example output:
    # "Acest apartament include Dormitor, BucÄƒtÄƒrie, Baie. 
    #  Caracteristici includ parchet, blat de granit. 
    #  Stil general: modern."
```

### Phase 4: Property Type Options (TASK-040)

**Update dropdown options to show Romanian:**

```typescript
const propertyTypeOptions = [
  { value: 'apartment', label: 'Apartament' },
  { value: 'house', label: 'CasÄƒ' },
  { value: 'condo', label: 'Condominium' },
  { value: 'townhouse', label: 'CasÄƒ Ã®n È˜ir' },
  { value: 'land', label: 'Teren' },
  { value: 'commercial', label: 'Comercial' }
];
```

**Internal value stays English:**
```javascript
// Stored in database: "apartment"
// Displayed to user: "Apartament"
```

### Phase 5: Error Messages (TASK-041)

**Translate all validation messages:**

```typescript
const errorMessages = {
  'property_type_required': 'SelectaÈ›i tipul proprietÄƒÈ›ii Ã®nainte de previzualizare',
  'images_required': 'Este necesarÄƒ cel puÈ›in o imagine',
  'invalid_price': 'PreÈ›ul trebuie sÄƒ fie un numÄƒr valid',
  'save_failed': 'Nu s-a putut salva anunÈ›ul'
};
```

---

## Testing Requirements

### Manual Testing Checklist

- [ ] All buttons show Romanian text
- [ ] All form labels in Romanian
- [ ] AI messages in Romanian
- [ ] Property descriptions in Romanian
- [ ] Error messages in Romanian
- [ ] Success messages in Romanian
- [ ] Dropdown options show Romanian labels
- [ ] Database still stores English values
- [ ] API requests use English field IDs
- [ ] Preview page shows Romanian text

### Automated Tests

- [ ] Unit tests for translation function
- [ ] E2E test with Romanian UI
- [ ] Verify backend still receives English field names
- [ ] Verify database stores English values

---

## Example User Flow (Romanian)

1. **Landing Page:**
   ```
   Ãncepe
   Pune o pozÄƒ pentru a Ã®ncepe anunÈ›ul
   [Zone de Ã®ncÄƒrcare imagini]
   ```

2. **After Upload:**
   ```
   Prezentare Proprietate
   2 imagini analizate
   
   Camere detectate Ã®n imagini:
   ğŸ›ï¸ Dormitor  ğŸ³ BucÄƒtÄƒrie  ğŸš¿ Baie
   
   "Acest apartament include Dormitor, BucÄƒtÄƒrie, Baie..."
   
   [Formular]
   Tipul ProprietÄƒÈ›ii: [Apartament â–¼]
   PreÈ›: [________]
   Dormitoare: [________]
   
   [ContinuÄƒ]  [Previzualizare È™i Salvare]
   ```

3. **At Completion:**
   ```
   âœ“ AnunÈ› Complet!
   AÈ›i completat toate informaÈ›iile necesare. 
   SunteÈ›i gata sÄƒ previzualizaÈ›i È™i sÄƒ salvaÈ›i anunÈ›ul?
   
   [Previzualizare AnunÈ›]
   ```

4. **Preview Page:**
   ```
   Previzualizare AnunÈ›
   VerificaÈ›i toate detaliile anunÈ›ului dvs
   
   Apartament
   350.000 â‚¬
   2 Dormitoare, 1 Baie, 1.200 mp
   
   [SalveazÄƒ AnunÈ›ul]  [EditeazÄƒ]
   ```

5. **Success Modal:**
   ```
   âœ… AnunÈ› Salvat cu Succes!
   AnunÈ›ul dvs. de proprietate a fost salvat.
   ID AnunÈ›: #123
   
   [CreeazÄƒ Alt AnunÈ›]  [Vezi AnunÈ›]
   ```

---

## Tasks

- **TASK-037:** Create i18n infrastructure and translation files
- **TASK-038:** Update all frontend components with Romanian text
- **TASK-039:** Modify backend to return Romanian AI messages
- **TASK-040:** Update property type options to display Romanian
- **TASK-041:** Translate all error and validation messages
- **TASK-042:** Add Romanian room type and amenity translations
- **TASK-043:** Update synthesis display to use Romanian
- **TASK-044:** E2E test for complete Romanian user flow

---

## Future Enhancements

### Multi-Language Support
Once Romanian is implemented, the infrastructure can support:
- Language switcher in UI
- User preference storage
- Multiple translation files (ro.json, en.json, etc.)
- Detect browser language
- Per-user language settings

### Region-Specific
- Use "JudeÈ›" (county) instead of "State" for Romania
- Use "metri pÄƒtraÈ›i" (mÂ²) instead of square feet
- Romanian currency format (RON/Lei)
- Romanian phone number format
- Romanian address format

---

## Acceptance Criteria

- [x] Story created and documented
- [ ] All UI text translated to Romanian
- [ ] All AI messages in Romanian
- [ ] Property descriptions in Romanian
- [ ] Field labels in Romanian
- [ ] Backend still uses English internally
- [ ] Database values still in English
- [ ] API still uses English field names
- [ ] User can complete entire flow in Romanian
- [ ] All error messages translated
- [ ] Success messages translated
- [ ] Manual testing confirms Romanian throughout
- [ ] E2E test passes in Romanian

---

## Notes

### Why This Matters
- Romanian market for real estate
- Better UX for Romanian speakers
- Professional appearance
- Competitive advantage

### Translation Quality
- Use natural, conversational Romanian
- Avoid literal translations
- Consider regional variations
- Get native speaker review

### Technical Debt Avoided
- Clean separation: UI (Romanian) vs. Backend (English)
- Easy to add more languages later
- No backend changes needed for new languages
- Database remains language-independent

---

## References

- [Romanian Real Estate Terminology](https://example.com)
- [Romanian UI/UX Best Practices](https://example.com)
- i18n libraries: svelte-i18n, vue-i18n (for reference)

---

**Estimated Effort:** 2-3 days  
**Complexity:** Medium  
**Risk:** Low (additive change, doesn't break existing functionality)
